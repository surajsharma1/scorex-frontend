<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@700;900&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #ff0055; }
        body { margin: 0; width: 1920px; height: 1080px; background: transparent; font-family: 'Barlow Condensed', sans-serif; color: #fff; overflow: hidden;}
        
        .rail-top { position: absolute; top: 0; width: 100%; }
        .rail-1 { height: 30px; background: var(--accent); font-size: 1rem; font-weight: 900; display: flex; align-items: center; padding: 0 50px; }
        .rail-2 { height: 40px; background: rgba(0,0,0,0.8); border-bottom: 2px solid var(--accent); display: flex; align-items: center; padding: 0 50px; font-size: 1.5rem; }

        .rail-bottom { position: absolute; bottom: 0; width: 100%; }
        .rail-3 { height: 80px; background: #000; display: flex; align-items: center; padding: 0 50px; border-top: 4px solid #fff; }

        /* NEW PUSH CONTAINER */
        #push-container { position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%) scale(0) rotate(-5deg); opacity: 0; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 999; }
        #push-container.active { transform: translate(-50%, -50%) scale(1.5) rotate(0deg); opacity: 1; }
        .push-box { background: var(--accent); color: #fff; padding: 20px 80px; font-size: 5rem; font-weight: 900; font-style: italic; text-transform: uppercase; box-shadow: 0 0 50px var(--accent); clip-path: polygon(10% 0, 100% 0, 90% 100%, 0 100%); }
    </style>
</head>
<body>
    <div class="rail-top">
        <div class="rail-1" id="tournament-name">WORLD BROADCAST</div>
        <div class="rail-2">LIVE FEED</div>
    </div>

    <div id="push-container">
        <div class="push-box"><span id="p-msg">SIX!</span></div>
    </div>

    <div class="rail-bottom">
        <div class="rail-3">
            <span style="font-size: 4rem; font-weight: 900;" id="team1-score">0/0</span>
            <span style="margin-left: 20px; font-size: 1.5rem; opacity: 0.6;" id="team1-overs">(0.0)</span>
        </div>
    </div>

    <script src="overlay-utils.js"></script>
    <script>
        const bc = window.initBroadcastChannel();
    
        bc.onmessage = (ev) => {
            const data = ev.data;
            if (data.type === 'PUSH_EVENT') {
                const railPush = document.getElementById('push-rail');
                railPush.textContent = data.message;
                railPush.style.display = 'block'; // Simple toggle for this design
                setTimeout(() => railPush.style.display = 'none', 3000);
                return;
            }
    
            // Rail 3: Core Score
            const scoreSpan = document.querySelector('.rail-3 span:first-child');
            const overSpan = document.querySelector('.rail-3 span:last-child');
            if (data.team1) {
                scoreSpan.textContent = `${data.team1.shortName} ${data.team1.score}/${data.team1.wickets}`;
                overSpan.textContent = `(${data.team1.overs})`;
            }
    
            // Rail 4: Batter Stats
            if (data.striker) {
                const playerInfo = document.querySelector('.rail-4');
                playerInfo.innerHTML = `<span>STRIKER: <b>${data.striker.name}</b> ${data.striker.runs}*(${data.striker.balls})</span>`;
            }
        };
    </script>
</body>
</html>