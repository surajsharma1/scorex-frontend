<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Neon Minimal</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="/socket.io/socket.io.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: transparent; font-family: 'Roboto', sans-serif; }
        
        .strip {
            position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%);
            display: flex; height: 80px;
            background: #121212; color: #fff;
            border-radius: 8px; overflow: hidden;
            box-shadow: 0 0 20px rgba(0,0,0,0.8);
            border-top: 3px solid #00e676;
        }

        .section { padding: 0 20px; display: flex; flex-direction: column; justify-content: center; border-right: 1px solid #333; }
        
        .match-info { min-width: 120px; }
        .teams { font-weight: 900; font-size: 20px; letter-spacing: 1px; color: #bdbdbd; }
        .teams span { color: #fff; }

        .score-box { min-width: 140px; background: #1e1e1e; align-items: center; }
        .big-score { font-size: 36px; font-weight: 900; color: #00e676; }
        .overs { font-size: 14px; color: #9e9e9e; font-weight: bold; }

        .batter-box { min-width: 200px; font-size: 14px; }
        .batter { display: flex; justify-content: space-between; margin-bottom: 4px; }
        .batter.active { color: #00e676; font-weight: bold; }
        .batter.active::after { content: '*'; }

        .bowler-box { min-width: 180px; background: #1e1e1e; }
        .bowler-name { font-weight: bold; color: #2979ff; margin-bottom: 5px; }
        .balls-vec { display: flex; gap: 3px; }
        .dot { width: 18px; height: 18px; background: #424242; border-radius: 2px; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold; }
        .dot.bound { background: #2979ff; color: white; }
        .dot.out { background: #ff1744; color: white; }

    </style>
</head>
<body>
    <div class="strip">
        <div class="section match-info">
            <div class="teams"><span id="bat">IND</span> v <span id="bwl">AUS</span></div>
            <div style="font-size: 10px; opacity: 0.6; margin-top: 5px;">LIVE</div>
        </div>
        <div class="section score-box">
            <div class="big-score"><span id="sc">0</span>/<span id="wk">0</span></div>
            <div class="overs"><span id="ov">0.0</span> OVS</div>
        </div>
        <div class="section batter-box">
            <div class="batter active"><span id="p1">Striker</span> <span id="s1">0</span></div>
            <div class="batter"><span id="p2">Non-Striker</span> <span id="s2">0</span></div>
        </div>
        <div class="section bowler-box">
            <div style="display:flex; justify-content:space-between;">
                <span class="bowler-name" id="bname">Bowler</span>
                <span style="font-size:12px;" id="bfig">0/0</span>
            </div>
            <div class="balls-vec" id="bvec"></div>
        </div>
    </div>

    <script>
        const config = window.OVERLAY_CONFIG || { apiBaseUrl: 'http://localhost:5000/api/v1' };
        const socket = io(config.apiBaseUrl);
        if(config.matchId) socket.emit('join_match', config.matchId);

        socket.on('match_update', d => {
            document.getElementById('sc').innerText = d.score;
            document.getElementById('wk').innerText = d.wickets;
            document.getElementById('ov').innerText = d.overs;
            document.getElementById('bat').innerText = d.battingTeam;
            document.getElementById('bwl').innerText = d.bowlingTeam;
            
            if(d.striker) {
                document.getElementById('p1').innerText = d.striker.name;
                document.getElementById('s1').innerText = d.striker.runs;
            }
            if(d.nonStriker) {
                document.getElementById('p2').innerText = d.nonStriker.name;
                document.getElementById('s2').innerText = d.nonStriker.runs;
            }
            if(d.bowler) {
                document.getElementById('bname').innerText = d.bowler.name;
                document.getElementById('bfig').innerText = `${d.bowler.wickets}/${d.bowler.runsConceded}`;
            }

            const v = document.getElementById('bvec');
            v.innerHTML = '';
            (d.thisOver || []).forEach(r => {
                const b = document.createElement('div');
                b.className = `dot ${['4','6'].includes(r) ? 'bound' : r === 'W' ? 'out' : ''}`;
                b.innerText = r;
                v.appendChild(b);
            });
        });
    </script>
</body>
</html>