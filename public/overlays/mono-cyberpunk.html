<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@700;900&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; width: 1920px; height: 1080px; background: transparent; font-family: 'Barlow Condensed', sans-serif; color: #fff; }
        
        .top-mono { position: absolute; top: 0; width: 100%; height: 60px; background: #fff; color: #000; display: flex; align-items: center; justify-content: space-between; padding: 0 40px; box-sizing: border-box; border-bottom: 8px solid #00f2ff; }
        
        .bottom-mono { position: absolute; bottom: 0; width: 100%; height: 120px; background: #000; display: flex; }
        .mono-score { width: 400px; height: 100%; background: #00f2ff; color: #000; display: flex; align-items: center; justify-content: center; font-size: 4rem; font-weight: 900; }
        .mono-players { flex-grow: 1; padding: 0 60px; display: flex; align-items: center; justify-content: space-between; font-size: 2rem; }

        #push-mono { position: absolute; bottom: 130px; left: 40px; background: #00f2ff; color: #000; padding: 10px 60px; font-size: 4rem; font-weight: 900; transform: translateX(-150%); transition: 0.4s; }
        #push-mono.active { transform: translateX(0); }

        /* NEW PUSH CONTAINER */
        #push-container {
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0) rotate(-5deg);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 999;
        }
        #push-container.active {
            transform: translate(-50%, -50%) scale(1.5) rotate(0deg);
            opacity: 1;
        }
        .push-box {
            background: var(--accent, #00f2ff);
            color: #000;
            padding: 20px 80px;
            font-size: 5rem;
            font-weight: 900;
            font-style: italic;
            text-transform: uppercase;
            box-shadow: 0 0 50px var(--accent);
            clip-path: polygon(10% 0, 100% 0, 90% 100%, 0 100%);
        }
    </style>
</head>
<body>
    <div class="top-mono">
        <span style="font-weight: 900; font-size: 2rem;" id="tournament-name"></span>
        <span style="background:#000; color:#fff; padding: 0 20px;">LIVE</span>
    </div>

    <div id="push-mono">SIXER!</div>

    <!-- NEW PUSH CONTAINER -->
    <div id="push-container">
        <div class="push-box"><span id="p-msg">SIX!</span></div>
    </div>

    <div class="bottom-mono">
        <div class="mono-score" id="score-display"></div>
        <div class="mono-players">
            <div><span id="striker-name"></span> <span style="color:#00f2ff" id="striker-stat"></span></div>
            <div style="opacity:0.5"><span id="nonstriker-name"></span> <span id="nonstriker-stat"></span></div>
            <div style="text-align: right;">OVER <br><b id="overs-display">0.0</b></div>
        </div>
    </div>

    <script src="overlay-utils.js"></script>
    <script>
        // Handle score updates from ScoreboardUpdate component
        window.onScoreUpdate = function(data) {
            // Update tournament name
            if (data.tournament) {
                const tournamentEl = document.getElementById('tournament-name');
                if (tournamentEl) tournamentEl.textContent = data.tournament.name || '';
            }
            
            // Update score display
            if (data.team1 && data.team2) {
                const battingTeam = data.team1.isBatting ? data.team1 : data.team2;
                const scoreDisplayEl = document.getElementById('score-display');
                const oversDisplayEl = document.getElementById('overs-display');
                
                if (scoreDisplayEl) {
                    scoreDisplayEl.textContent = `${battingTeam.name?.substring(0, 3).toUpperCase() || ''} ${battingTeam.score}/${battingTeam.wickets}`;
                }
                if (oversDisplayEl) {
                    oversDisplayEl.textContent = battingTeam.overs || '0.0';
                }
            }
            
            // Update striker
            if (data.striker) {
                const strikerNameEl = document.getElementById('striker-name');
                const strikerStatEl = document.getElementById('striker-stat');
                if (strikerNameEl) strikerNameEl.textContent = data.striker.name || '';
                if (strikerStatEl) {
                    const status = data.striker.status || '*';
                    strikerStatEl.innerHTML = `${data.striker.runs || 0}* <small>(${data.striker.balls || 0})</small>`;
                }
            }
            
            // Update non-striker
            if (data.nonStriker) {
                const nonStrikerNameEl = document.getElementById('nonstriker-name');
                const nonStrikerStatEl = document.getElementById('nonstriker-stat');
                if (nonStrikerNameEl) nonStrikerNameEl.textContent = data.nonStriker.name || '';
                if (nonStrikerStatEl) {
                    nonStrikerStatEl.innerHTML = `${data.nonStriker.runs || 0} <small>(${data.nonStriker.balls || 0})</small>`;
                }
            }
        };

        // Legacy triggerPush
        function triggerPush(msg) {
            const m = document.getElementById('push-mono');
            if (m) {
                m.innerText = msg; 
                m.classList.add('active');
                setTimeout(() => m.classList.remove('active'), 3000);
            }
        }

        // Listen for scoreUpdated events
        window.addEventListener('scoreUpdated', (e) => {
            window.onScoreUpdate(e.detail);
        });
    </script>
</body>
</html>
