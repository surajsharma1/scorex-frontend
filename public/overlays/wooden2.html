<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:ital,wght@0,900;1,900&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #f9cd05; --dark: #050505; --accent: #00f2ff; --wicket: #ff0033; }
        body { margin: 0; width: 1920px; height: 1080px; background: transparent; font-family: 'Barlow Condensed', sans-serif; color: white; overflow: hidden; }

        .top-slab { position: absolute; top: 0; width: 100%; height: 75px; background: linear-gradient(to bottom, var(--dark), transparent); display: flex; align-items: flex-start; padding: 15px 60px; box-sizing: border-box; }
        .tournament-badge { background: var(--gold); color: #000; padding: 5px 30px; font-weight: 900; font-size: 1.8rem; clip-path: polygon(0 0, 100% 0, 95% 100%, 5% 100%); }

        /* PUSH NOTIFICATION LOCK */
        #push-lock { position: absolute; top: 150px; right: 0; background: var(--accent); color: #000; padding: 10px 60px; font-size: 4rem; font-weight: 900; transform: translateX(100%); transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); border-left: 15px solid #fff; }
        #push-lock.active { transform: translateX(0); }

        /* NEW PUSH CONTAINER */
        #push-container {
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0) rotate(-5deg);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 999;
        }
        #push-container.active {
            transform: translate(-50%, -50%) scale(1.5) rotate(0deg);
            opacity: 1;
        }
        .push-box {
            background: var(--accent, #00f2ff);
            color: #000;
            padding: 20px 80px;
            font-size: 5rem;
            font-weight: 900;
            font-style: italic;
            text-transform: uppercase;
            box-shadow: 0 0 50px var(--accent);
            clip-path: polygon(10% 0, 100% 0, 90% 100%, 0 100%);
        }

        .bottom-bar { position: absolute; bottom: 40px; left: 60px; width: 1800px; height: 120px; display: flex; align-items: center; }
        .score-wrap { background: var(--dark); border-left: 8px solid var(--accent); padding: 10px 50px; display: flex; flex-direction: column; min-width: 350px; }
        .players-wrap { flex-grow: 1; height: 80px; background: rgba(0,0,0,0.8); margin-left: 20px; display: flex; align-items: center; padding: 0 40px; gap: 60px; border-bottom: 4px solid var(--accent); }
        .player-box { display: flex; flex-direction: column; }
        .p-name { color: var(--accent); font-size: 1.2rem; font-weight: 700; }
        .p-runs { font-size: 2.5rem; font-weight: 900; }
    </style>
</head>
<body>
    <div class="top-slab">
        <div class="tournament-badge" id="tournament-name"></div>
    </div>

    <div id="push-lock"><span id="p-txt">OUT!</span></div>

    <!-- NEW PUSH CONTAINER -->
    <div id="push-container">
        <div class="push-box"><span id="p-msg">SIX!</span></div>
    </div>

    <div class="bottom-bar">
        <div class="score-wrap">
            <div style="font-size: 1.5rem; color: var(--gold);" id="team-name"></div>
            <div style="font-size: 4rem; font-weight: 900; line-height: 1;">
                <span id="score">0/0</span> <small style="font-size: 1.5rem; opacity: 0.5;" id="overs">(0.0)</small>
            </div>
            <!-- Bowler info -->
            <div style="font-size: 1rem; color: var(--accent);" id="bowler-info"></div>
        </div>
        
        <div class="players-wrap">
            <div class="player-box">
                <div class="p-name">STRIKER</div>
                <div class="p-runs" id="striker-stat">0 (0)*</div>
            </div>
            <div class="player-box" style="opacity: 0.6;">
                <div class="p-name">NON-STRIKER</div>
                <div class="p-runs" id="nonstriker-stat">0 (0)</div>
            </div>
        </div>
    </div>

    <script src="overlay-utils.js"></script>
    <script>
        // Handle score updates from ScoreboardUpdate component
        window.onScoreUpdate = function(data) {
            // Handle wicket/six/four events
            if (data.type === 'WICKET' || data.type === 'SIX' || data.type === 'FOUR') {
                const lock = document.getElementById('push-lock');
                const pTxt = document.getElementById('p-txt');
                if (lock && pTxt) {
                    pTxt.innerText = data.message || 'OUT!';
                    
                    // Dynamic styling
                    if (data.type === 'WICKET') lock.style.setProperty('--accent', 'var(--wicket)');
                    else if (data.type === 'SIX') lock.style.setProperty('--accent', '#2ecc71');
                    else lock.style.setProperty('--accent', '#00f2ff');

                    lock.classList.add('active');
                    setTimeout(() => lock.classList.remove('active'), 3500);
                }
                return;
            }

            // Update tournament name
            if (data.tournament) {
                const tournamentEl = document.getElementById('tournament-name');
                if (tournamentEl) tournamentEl.textContent = data.tournament.name || '';
            }
            
            // Update team name (batting team)
            if (data.team1 && data.team2) {
                const battingTeam = data.team1.isBatting ? data.team1 : data.team2;
                const teamNameEl = document.getElementById('team-name');
                if (teamNameEl) teamNameEl.textContent = battingTeam.name ? battingTeam.name.toUpperCase() : '';
                
                // Update score
                const scoreEl = document.getElementById('score');
                const oversEl = document.getElementById('overs');
                if (scoreEl) scoreEl.textContent = `${battingTeam.score}/${battingTeam.wickets}`;
                if (oversEl) oversEl.textContent = `(${battingTeam.overs})`;
            }
            
            // Update striker
            if (data.striker) {
                const strikerStatEl = document.getElementById('striker-stat');
                if (strikerStatEl) {
                    const status = data.striker.status || '*';
                    strikerStatEl.textContent = `${data.striker.runs || 0} (${data.striker.balls || 0})${status}`;
                }
            }
            
            // Update non-striker
            if (data.nonStriker) {
                const nonStrikerStatEl = document.getElementById('nonstriker-stat');
                if (nonStrikerStatEl) {
                    nonStrikerStatEl.textContent = `${data.nonStriker.runs || 0} (${data.nonStriker.balls || 0})`;
                }
            }
            
            // Update bowler
            if (data.bowler) {
                const bowlerInfoEl = document.getElementById('bowler-info');
                if (bowlerInfoEl) {
                    bowlerInfoEl.textContent = `Bowler: ${data.bowler.name || ''} ${data.bowler.overs || 0}-${data.bowler.maidens || 0}-${data.bowler.runs || 0}-${data.bowler.wickets || 0}`;
                }
            }
        };

        // Listen for scoreUpdated events from overlay-utils
        window.addEventListener('scoreUpdated', (e) => {
            window.onScoreUpdate(e.detail);
        });
    </script>
</body>
</html>
